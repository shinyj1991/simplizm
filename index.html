<!doctype html>
<html lang="ko">
<head>
	<!-- common -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=750, user-scalable=no">

    <!-- SEO : search engine optimization -->
    <meta name="description" content="재미로해보는 나의 순자산 순위 알아보기">
    <meta name="keywords" content="simplizm, 순자산, 순자산순위, 대한민국순자산순위">
    <meta name="author" content="ShinyJ">

    <!-- OG : opengraph -->
    <meta property="og:title" content="대한민국 순자산 순위 구하기">
    <meta property="og:description" content="재미로해보는 나의 순자산 순위 알아보기">
    <meta property="og:image" content="공유이미지 800x400">

    <!-- theme, favicon -->
    <link rel="manifest" href="./public/favicon/manifest.json">
    <link rel="shortcut icon" type="image/x-icon" href="./public/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="./public/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./public/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./public/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./public/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./public/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./public/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./public/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./public/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./public/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./public/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./public/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./public/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./public/favicon/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="./public/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#000000">

    <!-- title -->
    <title>SIMPLIZM</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./public/css/style.css">

    <!-- Javascript -->
    <script src="./public/js/library/jquery-3.4.0.min.js"></script>
    <script src="./public/js/library/rivets.bundled.min.js"></script>

    <script src="./public/js/plugin/eclipse.js"></script>
    <script src="./public/js/plugin/inflation.js"></script>
    <script src="./public/js/plugin/kronos.js"></script>
    <script src="./public/js/plugin/sunrise.js"></script>

    <script src="./public/js/simplizm/core.js"></script>
    <script src="./public/js/simplizm/init.js"></script>
    <script src="./public/js/simplizm/rivets.js"></script>
</head>
<body>
  <style>
    #wrap {width: 600px; margin: 0 auto; padding: 100px 0; font-size: 24px;}
    #wrap h1 {font-weight: 700; font-size: 50px; text-align: center;}
    #wrap input {height: 100px; margin: 50px 0 0; font-size: 34px;}
    #wrap ._btn {height: 100px; margin: 30px 0 0; font-size: 34px;}
    #wrap .value {margin: 100px 0 0; font-size: 30px; text-align: center;}
    #wrap .result {margin: 30px 0 0; font-size: 30px; text-align: center;}
    #wrap .result strong {font-weight: 700; color: red;}
    #wrap .notice {margin: 30px 0 0; color: #777777;}
  </style>
  <div id="wrap">
    <h1>대한민국 순자산 순위 구하기</h1>
    <input type="number" rv-value="post.asset" placeholder="자산을 입력하세요">
    <button type="button" class="_btn c1" rv-on-click="methods.actionCompute">계산하기</button>
    <p class="value">당신의 순자산 { post.asset | number } 원</p>
    <p class="result" rv-html="item.result"></p>
    <p class="notice">※ 위 순위는 통계청 자료를 기반으로 근사치를 구한값입니다.<br>어디까지나 재미로 봐주세요</p>
  </div>
	<script>
		var FRONT = new function() {
			var _ = this;

      _.post = {};
			_.item = {
        percentile: [
          0, // 100%
          10700000, // 90%
          43310000, // 80%
          89500000, // 70%
          140650000, // 60%
          200500000, // 50%
          274960000, // 40%
          369140000, // 30%
          517000000, // 20%
          810120000, // 10%
          1400000000, // 5%
          3000000000, // 1%
          1240000000000, // 36위 0.000001 %
          19840000000000 // 1위
        ],
        result: ''
      };

			console.log(_);

			_.methods = {
        actionCompute: function(e, m) {
          if (!/^[0-9]*$/.test(_.post.asset)) {
            alert('0이상의 정수만 입력해주세요');
            return;
          }

          var group = 0;
          var result = 0;

          $.each(_.item.percentile, function(i, o) {
            if (_.post.asset > o) {
              group++;
            }
          });

          var max = _.item.percentile[group] - _.item.percentile[group - 1];
          var val = max - (_.post.asset - _.item.percentile[group - 1]);

          if (group === 0) {
            _.item.result = '당신의 순자산은 대한민국 상위<br><strong>100%</strong> 입니다.';
          } else if (group < 10) {
            result = (10 - group) * 10 + val / max * 10;
            _.item.result = '당신의 순자산은 대한민국 상위<br><strong>' + result + '%</strong> 입니다.';
          } else {
            if (group === 10) { // 5 ~ 10 %
              result = 5 + val / max * 5;
              _.item.result = '당신의 순자산은 대한민국 상위<br><strong>' + result + '%</strong> 입니다.';
            }
            if (group === 11) { // 1 ~ 5 %
              result = 1 + val / max * 4;
              _.item.result = '당신의 순자산은 대한민국 상위<br><strong>' + result + '%</strong> 입니다.';
            }
            if (group === 12) { // 1 ~ 5 %
              console.log(val / max);
              _.item.result = '당신의 순자산은 대한민국 상위 <strong>1%</strong> 이내 입니다.';
            }
            if (group === 13) { // 2위 ~ 1%
              _.item.result = '당신의 순자산은 대한민국 상위 <strong>0.000001%</strong> 입니다.';
            }
            if (group === 14) { // 1위
              _.item.result = '당신의 순자산은 대한민국 <strong>1위</strong>입니다.';
            }
          }
          console.log(group);
        }
      };

			rivets.bind($('#wrap'), _);
		}
  </script>
</body>
</html>